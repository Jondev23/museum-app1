@tailwind base;
@tailwind components;
@tailwind utilities;

/* Import screen transition animations */
@import './screen-animations.css';

/* ============================================
   CUSTOM FONTS FOR MUSEUM APP
   ============================================ */
@font-face {
  font-family: 'Tisa Pro';
  src: url('/fonts/TisaPro-Regular.otf') format('opentype');
  font-weight: 400;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: 'Tisa Pro';
  src: url('/fonts/TisaPro-Light.otf') format('opentype');
  font-weight: 300;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: 'Tisa Pro';
  src: url('/fonts/TisaPro-BoldItalic.otf') format('opentype');
  font-weight: 700;
  font-style: italic;
  font-display: swap;
}

@font-face {
  font-family: 'Tisa Pro';
  src: url('/fonts/TisaPro-XboldIta.otf') format('opentype');
  font-weight: 800;
  font-style: italic;
  font-display: swap;
}

@font-face {
  font-family: 'Tisa Sans Pro';
  src: url('/fonts/TisaSansPro-Regular.otf') format('opentype');
  font-weight: 400;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: 'Tisa Sans Pro';
  src: url('/fonts/TisaSansPro-Medium.otf') format('opentype');
  font-weight: 500;
  font-style: normal;
  font-display: swap;
}

/* ============================================
   CSS VARIABLES - DESIGN TOKENS
   ============================================ */
:root {
  /* ========== COLOR PALETTE ========== */
  --color-neutral-light: #d9d9d9;
  --color-neutral-dark: #1a1a1a; 
  --color-white: #ffffff; 
  --color-kupfer: #a94930; 
  --color-blassgruen-dark: #598364;
  --color-blassgruen: #85af8b; 
  --color-schiefer: #344243; 
  --color-schiefer-dark: #2a3334; 

  /* ========== SEMANTIC COLORS ========== */
  --color-primary: var(--color-kupfer);
  --color-text-primary: var(--color-neutral-light);
  --color-background-primary: var(--color-neutral-dark);
  --color-feedback-correct: var(--color-blassgruen-dark);
  --color-feedback-incorrect: var(--color-kupfer);

  /* ========== TYPOGRAPHY SYSTEM ========== */
  /* Main titles */
  --typography-head-font-size: 6rem; 
  --typography-head-line-height: 7.2rem; 
  --typography-head-font-weight: 700;
  --typography-head-font-style: italic;
  --typography-head-font-family: 'Tisa Pro';

  /* Subtitles */
  --typography-subline-font-size: 4rem;
  --typography-subline-line-height: 4.8rem;
  --typography-subline-font-weight: 400;
  --typography-subline-font-style: normal;
  --typography-subline-font-family: 'Tisa Sans Pro';

  /* Questions */
  --typography-fragen-font-size: 3.375rem; 
  --typography-fragen-line-height: 4.05rem; 
  --typography-fragen-font-weight: 800;
  --typography-fragen-font-style: italic;
  --typography-fragen-font-family: 'Tisa Pro';

  /* Answer buttons */
  --typography-antworten-buttons-font-size: 3rem; 
  --typography-antworten-buttons-line-height: 3.6rem; 
  --typography-antworten-buttons-font-weight: 400;
  --typography-antworten-buttons-font-style: normal;
  --typography-antworten-buttons-font-family: 'Tisa Sans Pro';
  --typography-antworten-buttons-letter-spacing: 0.48px;

  /* Body text */
  --typography-antwort-fliess-font-size: 2.25rem;
  --typography-antwort-fliess-line-height: 2.7rem;
  --typography-antwort-fliess-font-weight: 400;
  --typography-antwort-fliess-font-style: normal;
  --typography-antwort-fliess-font-family: 'Tisa Pro';
  --typography-antwort-fliess-letter-spacing: 0.36px;

  /* ========== SPACING SYSTEM ========== */
  --spacing-xs: clamp(0.25rem, 1vw, 0.75rem);
  --spacing-sm: clamp(0.5rem, 1.5vw, 1rem);
  --spacing-md: clamp(0.75rem, 2vw, 1.5rem);
  --spacing-lg: clamp(1rem, 3vw, 2.5rem);
  --spacing-xl: clamp(1.5rem, 4vw, 3.5rem);
  --spacing-2xl: clamp(2rem, 5vw, 4.5rem);

  /* ========== BORDER RADIUS ========== */
  --border-radius-sm: clamp(0.25rem, 1vw, 0.75rem);
  --border-radius-md: clamp(0.5rem, 2vw, 1.5rem);
}

/* ============================================
   RESPONSIVE BREAKPOINTS
   ============================================ */
@media (max-width: 480px) {
  :root {
    --typography-head-font-size: 4rem;
    --typography-subline-font-size: 3rem;
    --typography-fragen-font-size: 2.5rem;
    --typography-antworten-buttons-font-size: 2.25rem;
    --typography-antwort-fliess-font-size: 1.875rem;
  }
}

@media (max-width: 768px) {
  :root {
    --spacing-lg: clamp(0.75rem, 2.5vw, 1.5rem);
    --spacing-xl: clamp(1rem, 3vw, 2rem);
    --spacing-2xl: clamp(1.5rem, 4vw, 2.5rem);
  }
}

@media (orientation: landscape) and (max-height: 600px) {
  :root {
    --spacing-lg: clamp(0.5rem, 2vh, 1rem);
    --spacing-xl: clamp(0.75rem, 3vh, 1.5rem);
  }
}

/* ============================================
   BASE STYLES
   ============================================ */
@layer base {
  html {
    font-family: 'Tisa Pro';
  }

  body {
    margin: 0;
    padding: 0;
    overflow: hidden;
    user-select: none;
    background-color: var(--color-background-primary);
    color: var(--color-text-primary);
  }

  /* Ensure animations are ready when body loads */
  body.screen-animations-loaded {
    --animations-ready: true;
  }

  /* Touch optimization */
  button, [role="button"], input[type="submit"], input[type="button"] {
    touch-action: manipulation;
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    user-select: none;
  }

  /* Prevent text selection on touch devices */
  * {
    -webkit-tap-highlight-color: transparent;
  }
}

/* ============================================
   TYPOGRAPHY UTILITY CLASSES
   ============================================ */
@layer components {
  .typography-head {
    font-family: var(--typography-head-font-family);
    font-size: var(--typography-head-font-size);
    line-height: var(--typography-head-line-height);
    font-weight: var(--typography-head-font-weight);
    font-style: var(--typography-head-font-style);
    text-align: center;
  }

  .typography-subline {
    font-family: var(--typography-subline-font-family);
    font-size: var(--typography-subline-font-size);
    line-height: var(--typography-subline-line-height);
    font-weight: var(--typography-subline-font-weight);
    font-style: var(--typography-subline-font-style);
    text-align: center;
  }

  .typography-fragen {
    font-family: var(--typography-fragen-font-family);
    font-size: var(--typography-fragen-font-size);
    line-height: var(--typography-fragen-line-height);
    font-weight: var(--typography-fragen-font-weight);
    font-style: var(--typography-fragen-font-style);
    text-align: center;
  }

  .typography-antworten-buttons {
    font-family: var(--typography-antworten-buttons-font-family);
    font-size: var(--typography-antworten-buttons-font-size);
    line-height: var(--typography-antworten-buttons-line-height);
    font-weight: var(--typography-antworten-buttons-font-weight);
    font-style: var(--typography-antworten-buttons-font-style);
    letter-spacing: var(--typography-antworten-buttons-letter-spacing);
    text-align: center;
  }

  .typography-antwort-fliess {
    font-family: var(--typography-antwort-fliess-font-family);
    font-size: var(--typography-antwort-fliess-font-size);
    line-height: var(--typography-antwort-fliess-line-height);
    font-weight: var(--typography-antwort-fliess-font-weight);
    font-style: var(--typography-antwort-fliess-font-style);
    letter-spacing: var(--typography-antwort-fliess-letter-spacing);
    text-align: center;
  }
}

/* ============================================
   CRITICAL ANIMATIONS FOR FEEDBACK SCREEN
   Moved here to ensure they load with global styles
   ============================================ */
@layer components {
  @keyframes slideOutToLeftFeedback {
    0% {
      transform: translateX(0);
      opacity: 1;
    }
    50% {
      transform: translateX(-50%);
      opacity: 0.5;
    }
    100% {
      transform: translateX(-100%);
      opacity: 0;
    }
  }

  /* High specificity feedback exit animation */
  .screen-transition.exit-feedback,
  .exit-feedback,
  .screen-container .exit-feedback {
    animation-name: slideOutToLeftFeedback !important;
    animation-duration: 500ms !important;
    animation-timing-function: cubic-bezier(0.4, 0, 0.2, 1) !important;
    animation-fill-mode: both !important;
  }

  /* Hardware acceleration for better performance */
  .exit-feedback,
  .exit-feedback * {
    backface-visibility: hidden;
    -webkit-backface-visibility: hidden;
    will-change: transform, opacity;
  }
}

/* ============================================
   HIGH PRIORITY ANIMATION UTILITIES
   ============================================ */
@layer utilities {
  .screen-animations-loaded .exit-feedback {
    animation-name: slideOutToLeftFeedback !important;
    animation-duration: 500ms !important;
    animation-timing-function: cubic-bezier(0.4, 0, 0.2, 1) !important;
    animation-fill-mode: both !important;
  }

  .screen-animations-loaded.exit-feedback,
  .screen-animations-loaded .screen-transition.exit-feedback {
    animation-name: slideOutToLeftFeedback !important;
    animation-duration: 500ms !important;
    animation-timing-function: cubic-bezier(0.4, 0, 0.2, 1) !important;
    animation-fill-mode: both !important;
  }
}
